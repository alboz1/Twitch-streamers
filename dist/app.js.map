{"version":3,"sources":["app.js"],"names":["app","streamers","online","init","html","$","on","e","preventDefault","eventListeners","this","$this","text","show","parent","hide","streamer","val","replace","addStreamer","siblings","toLowerCase","index","indexOf","push","map","ajax","getData","dataType","then","data","url","_$","when","apply","_toConsumableArray","streamersData","_len","arguments","length","responses","Array","_key","response","forEach","_this2","render","status","name","stream","channel","display_name","getInfo","info","logo","error","props","append","catchError","game"],"mappings":"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","file":"app.js","sourcesContent":["const app = {\n\tstreamers: ['freecodecamp', 'tsm_dyrus', 'tsm_bjergsen', 'donthedeveloper', 'summit1g'],\n\tonline: false,\n\n\tinit() {\n\t\t$('.wrapper').html('');\n\t\tthis.getData();\n\t},\n\n\teventListeners() {\n\t\t$('.main-nav a').on('click', function(e) {\n\t\t\te.preventDefault();\n\t\t\tconst $this = $(this);\n\n\t\t\tif ($this.text() === 'Online') {\n\t\t\t\t$('.box').show();\n\t\t\t\t$('.status-Offline').parent().hide();\n\t\t\t} else if ($this.text() === 'Offline') {\n\t\t\t\t$('.box').show();\n\t\t\t\t$('.status-Online').parent().hide();\n\t\t\t} else if ($this.text() === 'All') {\n\t\t\t\t$('.box').show();\n\t\t\t}\n\t\t});\n\n\t\t$('form').on('submit', e => {\n\t\t\te.preventDefault();\n\t\t\tconst streamer = $(':text').val().replace(' ', '');\n\t\t\tif (streamer === '') return;\n\n\t\t\tthis.addStreamer(streamer);\n\t\t\tthis.init();\n\t\t});\n\n\t\t$('.wrapper').on('click','a button', function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tconst streamer = $(this).siblings('.name').text().toLowerCase();\n\t\t\tconst index = app.streamers.indexOf(streamer);\n\n\t\t\tapp.streamers.splice(index, 1);\n\t\t\tapp.init();\n\t\t});\n\t},\n\n\taddStreamer(streamer) {\n\t\tthis.streamers.push(streamer);\n\t},\n\n\tgetData() {\n\t\tconst streamersData = this.streamers.map(streamer => {\n\t\t\treturn $.ajax({\n\t\t\t\turl: `https://wind-bow.gomix.me/twitch-api/streams/${streamer}`,\n\t\t\t\tdataType: 'jsonp'\n\t\t\t})\n\t\t\t.then(data => {\n\t\t\t\t//check if streamer is online. If its not online make a call to take offline data\n\t\t\t\tif (data.stream === null) {\n\t\t\t\t\treturn $.ajax({\n\t\t\t\t\t\turl: `https://wind-bow.gomix.me/twitch-api/channels/${streamer}`,\n\t\t\t\t\t\tdataType: 'jsonp'\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn $.ajax({\n\t\t\t\t\t\turl: `https://wind-bow.gomix.me/twitch-api/streams/${streamer}`,\n\t\t\t\t\t\tdataType: 'jsonp'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t$.when(...streamersData)\n\t\t\t.then((...responses) => {\n\t\t\t\tresponses\n\t\t\t\t\t.map(response => response[0])\n\t\t\t\t\t.forEach((data,index) => {\n\t\t\t\t\t\tthis.getInfo(data,index);\n\t\t\t\t\t});\n\t\t\t});\n\t},\n\n\tgetInfo(data, index) {\n\t\tif (data.stream) {\n\t\t\tthis.online = true;\n\t\t\t//render function renders the data from the request creates and renders data into the page\n\t\t\tthis.render({\n\t\t\t\tstatus: 'Online',\n\t\t\t\tname: data.stream.channel.display_name,\n\t\t\t\tgame: data.stream.channel.game,\n\t\t\t\tinfo: data.stream.channel.status,\n\t\t\t\tlogo: data.stream.channel.logo,\n\t\t\t\turl: data.stream.channel.url\n\t\t\t});\n\t\t} else {\n\t\t\tthis.online = false;\n\n\t\t\tthis.render({\n\t\t\t\tstatus: 'Offline',\n\t\t\t\tname: data.display_name,\n\t\t\t\tlogo: data.logo,\n\t\t\t\turl: data.url,\n\t\t\t\terror: data.status,\n\t\t\t\tstreamer: this.streamers[index]\n\t\t\t});\n\t\t}\n\t},\n\n\tcatchError(error) {\n\t\tif (error === 422 || error === 400 || error === 404 || error === null) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\trender(props) {\n\t\t$('.wrapper').append(`\n\t\t\t<a href=\"${props.url}\" target=\"_blank\">\n\t\t\t\t<div class=\"box\" ${this.catchError(props.error) ? 'style=\"background: white\"' : `style=\"background: url('${props.logo}')\"`}>\n\t\t\t\t\t<span class=\"status-${props.status}\">\n\t\t\t\t\t\t${this.catchError(props.error) ? 'Account doesn\\'t exist' : props.status}\n\t\t\t\t\t</span>\n\t\t\t\t\t<p class=\"name\">${this.catchError(props.error) ? props.streamer : props.name}</p>\n\t\t\t\t\t${this.catchError(props.error) || !this.online ? '' : `<p class=\"game\">${props.game}</p>`}\n\t\t\t\t\t${this.catchError(props.error) || !this.online ? '' : `<p class=\"info\">${props.info}</p>`}\n\t\t\t\t\t<button class=\"delete-btn\">&times;</button>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t`);\n\t}\n}\napp.init();\napp.eventListeners();"]}